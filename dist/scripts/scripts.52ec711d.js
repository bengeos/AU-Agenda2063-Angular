function config($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/godchannel/news"),$stateProvider.state("godchannel",{abstract:!0,url:"/godchannel",templateUrl:"views/common/content.html"}).state("godchannel.news",{url:"/news",templateUrl:"views/news.html",controller:"NewsCtrl",data:{pageTitle:"News"}}).state("godchannel.mezmuramharic",{url:"/mezmuramharic",templateUrl:"views/mezmur.html",controller:"MezmurCtrl",params:{language:"amharic"},data:{pageTitle:"Amharic Mezmur"}}).state("godchannel.mezmurenglish",{url:"/mezmurenglish",templateUrl:"views/mezmur.html",controller:"MezmurCtrl",params:{language:"english"},data:{pageTitle:"English Mezmur"}}).state("godchannel.channel",{url:"/channel",templateUrl:"views/mentor.html",controller:"ChannelCtrl",data:{pageTitle:"Channels"}}).state("godchannel.channelvideo",{url:"/channelvideo",templateUrl:"views/channelVideos.html",controller:"ChannelVideoCtrl",data:{pageTitle:"Channel Videos"}}).state("godchannel.otherpreachingamharic",{url:"/otherpreachingamharic",templateUrl:"views/otherPreaching.html",controller:"OtherPreachingCtrl",params:{language:"amharic"},data:{pageTitle:"Other Preaching Amharic"}}).state("godchannel.otherpreachingenglish",{url:"/otherpreachingenglish",templateUrl:"views/otherPreaching.html",controller:"OtherPreachingCtrl",params:{language:"english"},data:{pageTitle:"Other Preaching English"}}).state("login",{abstract:!0,url:"/user",templateUrl:"views/login.html"}).state("login.signin",{url:"/login",templateUrl:"views/login.html",controller:"LogInCtrl",data:{pageTitle:"Example view"}})}function pageTitle($rootScope,$timeout){return{link:function(scope,element){var listener=function(event,toState,toParams,fromState,fromParams){var title="INSPINIA | Responsive Admin Theme";toState.data&&toState.data.pageTitle&&(title="INSPINIA | "+toState.data.pageTitle),$timeout(function(){element.text(title)})};$rootScope.$on("$stateChangeStart",listener)}}}function sideNavigation($timeout){return{restrict:"A",link:function(scope,element){$timeout(function(){element.metisMenu()})}}}function iboxTools($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools.html",controller:function($scope,$element){$scope.showhide=function(){var ibox=$element.closest("div.ibox"),icon=$element.find("i:first");ibox.find("div.ibox-content").slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),ibox.toggleClass("").toggleClass("border-bottom"),$timeout(function(){ibox.resize(),ibox.find("[id^=map-]").resize()},50)},$scope.closebox=function(){$element.closest("div.ibox").remove()}}}}function minimalizaSidebar($timeout){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:function($scope,$element){$scope.minimalize=function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},200)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},100)):$("#side-menu").removeAttr("style")}}}}function iboxToolsFullScreen($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools_full_screen.html",controller:function($scope,$element){$scope.showhide=function(){var ibox=$element.closest("div.ibox"),icon=$element.find("i:first");ibox.find("div.ibox-content").slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),ibox.toggleClass("").toggleClass("border-bottom"),$timeout(function(){ibox.resize(),ibox.find("[id^=map-]").resize()},50)},$scope.closebox=function(){$element.closest("div.ibox").remove()},$scope.fullscreen=function(){var ibox=$element.closest("div.ibox"),button=$element.find("i.fa-expand");$("body").toggleClass("fullscreen-ibox-mode"),button.toggleClass("fa-expand").toggleClass("fa-compress"),ibox.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}}}function MainCtrl(){var config={apiKey:"AIzaSyDy3YstCsr9_FqR4iRHLYD6ocIiD6HXX44",authDomain:"ethiopian-god-channel.firebaseapp.com",databaseURL:"https://ethiopian-god-channel.firebaseio.com",storageBucket:"ethiopian-god-channel.appspot.com",messagingSenderId:"170626859881"};firebase.initializeApp(config),console.log("Main Ctrl Loaded"),this.userName="God Channel",this.helloText="Welcome in God Channel Ethiopia",this.descriptionText="It is an application skeleton for a typical AngularJS web app. You can use it to quickly bootstrap your angular webapp projects and dev environment for these projects."}$(document).ready(function(){function fix_height(){var heightWithoutNavbar=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",heightWithoutNavbar+"px");var navbarHeigh=$("nav.navbar-default").height(),wrapperHeigh=$("#page-wrapper").height();navbarHeigh>wrapperHeigh&&$("#page-wrapper").css("min-height",navbarHeigh+"px"),navbarHeigh<wrapperHeigh&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(navbarHeigh>wrapperHeigh?$("#page-wrapper").css("min-height",navbarHeigh+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||fix_height()}),$(window).scroll(function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")}),setTimeout(function(){fix_height()})}),$(function(){$(window).bind("load resize",function(){$(document).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),function(){angular.module("inspinia",["ui.router","ui.bootstrap","ngMaterial","ui.select"])}(),angular.module("inspinia").config(config).run(function($rootScope,$state){$rootScope.$state=$state}),angular.module("inspinia").directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("iboxTools",iboxTools).directive("minimalizaSidebar",minimalizaSidebar).directive("iboxToolsFullScreen",iboxToolsFullScreen),angular.module("inspinia").controller("MainCtrl",MainCtrl).run(function($rootScope,$state){$rootScope.$state=$state}),angular.module("inspinia").controller("LogInCtrl",function($scope,$location,$state){console.log("Log in controller loaded"),firebase.auth().onAuthStateChanged(function(user){user?(console.log("Sign in",user),$state.go("godchannel.news")):console.log("Not Sign in")}),$scope.userSignIn=function(Users){console.log(Users);firebase.auth().signInWithEmailAndPassword(Users.Username,Users.Userpass)},$scope.userSignOut=function(Users){firebase.auth().signOut().then(function(){console.log("Sign out")},function(error){console.log("Sign out error")})}}),angular.module("inspinia").controller("NewsCtrl",function($scope,$timeout,$filter,$state){console.log("controller loaded"),firebase.auth().currentUser||(console.log("Invalid user"),$state.go("login.signin")),$scope.userSignOut=function(Users){firebase.auth().signOut().then(function(){console.log("Sign out")},function(error){console.log("Sign out error")})};var database=firebase.database(),databaseRef=database.ref(),NewsRef=databaseRef.child("news"),storage=firebase.storage();$scope.isAdding=!0,$scope.image_url="",$scope.News=new Array,NewsRef.on("value",function(snapshot){$scope.News=new Array,$timeout(function(){snapshot.forEach(function(childSnapshot){var parentKey=childSnapshot.key,childData=childSnapshot.val();childData.ParentID=parentKey,$scope.News.push(childData)}),console.log("All Newses :",$scope.News)})});var uploader=document.getElementById("upload_button"),progress_bar=document.getElementById("progress_bar");$scope.image_url="",uploader.addEventListener("change",function(e){var file=e.target.files[0],storageRef=storage.ref("images/"+new Date),task=storageRef.put(file);task.on("state_changed",function(snapshot){var percentage=snapshot.bytesTransferred/snapshot.totalBytes;console.log(percentage),progress_bar.value=percentage},function(){},function(snapshot){console.log("Upload Completed: ",task.snapshot.downloadURL),$scope.image_url=task.snapshot.downloadURL})}),$scope.addNewNews=function(newNews){console.log("Add New News: ",newNews);var now_date=(new Date).getTime();if($scope.image_url){var foundNews={title:newNews.title,full_desc:newNews.full_desc,short_desc:newNews.short_desc,pic_url:$scope.image_url,timestamp:now_date};console.log("Adding New News: ",foundNews),NewsRef.push(foundNews),progress_bar.value=0,$scope.News_Item={}}},$scope.addEditedNews=function(newNews){if(console.log("addEditedNews New News: ",newNews),newNews.pic_url){var foundNews={title:newNews.title,full_desc:newNews.full_desc,short_desc:newNews.short_desc,pic_url:newNews.pic_url,timestamp:newNews.timestamp};console.log("Adding New News: ",foundNews),NewsRef.child(newNews.ParentID).set(foundNews),$scope.News_Item={}}},$scope.removeNews=function(news){NewsRef.child(news.ParentID).remove(),$scope.News_Item={},console.log("Remove Album",news)},$scope.editNews=function(editNews){console.log("Edit New News: ",editNews),$scope.isAdding=!1,$scope.isEditing=!0,$scope.isDeleting=!1,console.log("editting Album",editNews),$scope.News_Item=editNews},$scope.deleteNews=function(editNews){console.log("Delete Album: ",editNews),$scope.isAdding=!1,$scope.isEditing=!1,$scope.isDeleting=!0,$scope.News_Item=editNews},$scope.cancelTask=function(){console.log("Cancel Task: "),$scope.isEditing=!1,$scope.isAdding=!0,$scope.isDeleting=!1,$scope.News_Item={}}}),angular.module("inspinia").controller("ChannelCtrl",function($scope,$timeout,$filter,$state){console.log("Channel controller loaded"),firebase.auth().currentUser||(console.log("Invalid user"),$state.go("login.signin")),$scope.userSignOut=function(Users){firebase.auth().signOut().then(function(){console.log("Sign out")},function(error){console.log("Sign out error")})};var database=firebase.database(),databaseRef=database.ref(),ChannelRef=databaseRef.child("channel"),storage=firebase.storage();$scope.isAdding=!0,$scope.image_url="",$scope.channels=new Array,ChannelRef.on("value",function(snapshot){$scope.channels=new Array,$timeout(function(){snapshot.forEach(function(childSnapshot){var parentKey=childSnapshot.key,childData=childSnapshot.val();childData.ParentID=parentKey,$scope.channels.push(childData)}),console.log("All Newses :",$scope.channels)})});var uploader=document.getElementById("upload_button"),progress_bar=document.getElementById("progress_bar");$scope.image_url="",uploader.addEventListener("change",function(e){var file=e.target.files[0],storageRef=storage.ref("images/"+new Date),task=storageRef.put(file);task.on("state_changed",function(snapshot){var percentage=snapshot.bytesTransferred/snapshot.totalBytes;console.log(percentage),progress_bar.value=percentage},function(){},function(snapshot){console.log("Upload Completed: ",task.snapshot.downloadURL),$scope.image_url=task.snapshot.downloadURL})}),$scope.addNew=function(new_data){var now_date=(new Date).getTime();if($scope.image_url){var found={church_name:new_data.church_name,founder:new_data.founder,name:new_data.name,satellite:new_data.satellite,frequency:new_data.frequency,website:new_data.website,pic_url:$scope.image_url,timestamp:now_date};console.log("Adding New News: ",found),ChannelRef.push(found),progress_bar.value=0,$scope.singleItem={}}},$scope.addEdited=function(new_data){if(console.log("addEditedNews New News: ",new_data),new_data.pic_url){var found={church_name:new_data.church_name,founder:new_data.founder,name:new_data.name,satellite:new_data.satellite,frequency:new_data.frequency,website:new_data.website,pic_url:new_data.pic_url,timestamp:new_data.timestamp};console.log("Adding New News: ",found),ChannelRef.child(new_data.ParentID).set(found),$scope.singleItem={}}},$scope.remove=function(new_data){ChannelRef.child(new_data.ParentID).remove(),$scope.singleItem={},console.log("Remove Album",new_data)},$scope.edit=function(edited_data){$scope.isAdding=!1,$scope.isEditing=!0,$scope.isDeleting=!1,$scope.singleItem=edited_data},$scope.delete=function(edited_data){$scope.isAdding=!1,$scope.isEditing=!1,$scope.isDeleting=!0,$scope.singleItem=edited_data},$scope.cancelTask=function(){$scope.isEditing=!1,$scope.isAdding=!0,$scope.isDeleting=!1,$scope.singleItem={}}}),angular.module("inspinia").controller("ChannelVideoCtrl",function($scope,$timeout,$filter,$state){console.log("Channel controller loaded"),firebase.auth().currentUser||(console.log("Invalid user"),$state.go("login.signin")),$scope.userSignOut=function(Users){firebase.auth().signOut().then(function(){console.log("Sign out")},function(error){console.log("Sign out error")})};var database=firebase.database(),databaseRef=database.ref(),VideoRef=databaseRef.child("preaching"),ChannelRef=databaseRef.child("channel");firebase.storage();$scope.isAdding=!0,$scope.image_url="",$scope.channel_id="",$scope.videos=new Array,$scope.channels=new Array,VideoRef.on("value",function(snapshot){$scope.videos=new Array,$timeout(function(){snapshot.forEach(function(childSnapshot){childSnapshot.forEach(function(subchildSnapshot){var parentKey=subchildSnapshot.key,childData=subchildSnapshot.val();childData.ParentID=parentKey,$scope.videos.push(childData),console.log("All Channel Videos :",$scope.videos)})})})}),ChannelRef.on("value",function(snapshot){$scope.channels=new Array,$timeout(function(){snapshot.forEach(function(childSnapshot){var parentKey=childSnapshot.key,childData=childSnapshot.val();childData.ParentID=parentKey,$scope.channels.push(childData)}),console.log("All Channels :",$scope.channels)})}),$scope.setChannel=function(channel){$scope.channel_id=channel.ParentID,console.log("Setting channel : ",channel),console.log("Channel ID : ",channel)},$scope.selectedChannel={value:$scope.channels[0]},$scope.addNew=function(new_data){var now_date=(new Date).getTime();if($scope.channel_id){var found={channel_id:$scope.channel_id,title:new_data.title,url:new_data.url,timestamp:now_date};console.log("Adding New Video: ",found),VideoRef.child($scope.channel_id).push(found),$scope.singleItem={}}},$scope.addEdited=function(new_data){console.log("addEditedNews New News: ",new_data);var found={channel_id:$scope.channel_id,title:new_data.title,url:new_data.url,timestamp:new_data.timestamp};console.log("Adding New News: ",found),VideoRef.child($scope.channel_id).push(found),$scope.channel_id!=new_data.channel_id&&VideoRef.child(new_data.ParentID).remove(),$scope.singleItem={},$scope.isEditting=!1,$scope.isAdding=!0,$scope.isDeleting=!1},$scope.remove=function(new_data){VideoRef.child(new_data.ParentID).remove(),$scope.singleItem={},console.log("Remove Album",new_data.ParentID)},$scope.edit=function(edited_data){$scope.channel_id=edited_data.ParentID,$scope.isAdding=!1,$scope.isEditing=!0,$scope.isDeleting=!1,$scope.singleItem=edited_data},$scope.delete=function(edited_data){$scope.isAdding=!1,$scope.isEditing=!1,$scope.isDeleting=!0,$scope.singleItem=edited_data},$scope.cancelTask=function(){$scope.isEditing=!1,$scope.isAdding=!0,$scope.isDeleting=!1,$scope.singleItem={}},$scope.getChannelName=function(id){for($scope.channelname="",i=0;i<$scope.channels.length;i++)$scope.channels[i].ParentID==id&&($scope.channelname=$scope.channels[i].name)}}),angular.module("inspinia").controller("MezmurCtrl",function($scope,$timeout,$filter,$state,$stateParams){console.log("controller loaded");var language=$stateParams.language;firebase.auth().currentUser||(console.log("Invalid user"),$state.go("login.signin")),$scope.userSignOut=function(Users){firebase.auth().signOut().then(function(){console.log("Sign out")},function(error){console.log("Sign out error")})};var database=firebase.database(),databaseRef=database.ref(),VideoRef=databaseRef.child("mezmur").child(language);$scope.isAdding=!0,$scope.image_url="",$scope.videos=new Array,$scope.channels=new Array,VideoRef.on("value",function(snapshot){$scope.videos=new Array,$timeout(function(){snapshot.forEach(function(childSnapshot){var parentKey=childSnapshot.key,childData=childSnapshot.val();childData.ParentID=parentKey,$scope.videos.push(childData),console.log("All Amharic Mezmur Videos :",$scope.videos)})})}),$scope.addNew=function(new_data){var now_date=(new Date).getTime();if(new_data){var found={artist:new_data.artist,title:new_data.title,url:new_data.url,timestamp:now_date};console.log("Adding New Video: ",found),VideoRef.push(found),$scope.singleItem={}}},$scope.addEdited=function(new_data){console.log("addEditedNews New News: ",new_data);var found={artist:new_data.artist,title:new_data.title,url:new_data.url,timestamp:new_data.timestamp};console.log("Adding New News: ",found),VideoRef.child(new_data.ParentID).set(found),$scope.singleItem={}},$scope.remove=function(new_data){VideoRef.child(new_data.ParentID).remove(),$scope.singleItem={},console.log("Remove Album",new_data)},$scope.edit=function(edited_data){$scope.isAdding=!1,$scope.isEditing=!0,$scope.isDeleting=!1,$scope.singleItem=edited_data},$scope.delete=function(edited_data){$scope.isAdding=!1,$scope.isEditing=!1,$scope.isDeleting=!0,$scope.singleItem=edited_data},$scope.cancelTask=function(){$scope.isEditing=!1,$scope.isAdding=!0,$scope.isDeleting=!1,$scope.singleItem={}}}),angular.module("inspinia").controller("OtherPreachingCtrl",function($scope,$timeout,$filter,$state,$stateParams){console.log("Other Teaching controller loaded");var language=$stateParams.language;firebase.auth().currentUser||(console.log("Invalid user"),$state.go("login.signin")),$scope.userSignOut=function(Users){firebase.auth().signOut().then(function(){console.log("Sign out")},function(error){console.log("Sign out error")})};var database=firebase.database(),databaseRef=database.ref(),VideoRef=databaseRef.child("other_teaching").child(language);$scope.isAdding=!0,$scope.image_url="",$scope.videos=new Array,$scope.channels=new Array,VideoRef.on("value",function(snapshot){$scope.videos=new Array,$timeout(function(){snapshot.forEach(function(childSnapshot){var parentKey=childSnapshot.key,childData=childSnapshot.val();childData.ParentID=parentKey,$scope.videos.push(childData),console.log("All Other Teaching Videos :",$scope.videos)})})}),$scope.addNew=function(new_data){var now_date=(new Date).getTime();if(new_data){var found={teacher:new_data.teacher,title:new_data.title,type:new_data.type,url:new_data.url,timestamp:now_date};console.log("Adding New Video: ",found),VideoRef.push(found),$scope.singleItem={}}},$scope.addEdited=function(new_data){console.log("addEditedNews New News: ",new_data);var found={teacher:new_data.teacher,title:new_data.title,type:new_data.type,url:new_data.url,timestamp:new_data.timestamp};console.log("Adding New News: ",found),VideoRef.child(new_data.ParentID).set(found),$scope.singleItem={}},$scope.remove=function(new_data){VideoRef.child(new_data.ParentID).remove(),$scope.singleItem={},console.log("Remove Album",new_data)},$scope.edit=function(edited_data){$scope.isAdding=!1,$scope.isEditing=!0,$scope.isDeleting=!1,$scope.singleItem=edited_data},$scope.delete=function(edited_data){$scope.isAdding=!1,$scope.isEditing=!1,$scope.isDeleting=!0,$scope.singleItem=edited_data},$scope.cancelTask=function(){$scope.isEditing=!1,$scope.isAdding=!0,$scope.isDeleting=!1,$scope.singleItem={}}});